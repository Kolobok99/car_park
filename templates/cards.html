{% extends 'base.html' %}
{% load static %}

{% block static_href %}
    {% static 'css/cards.css' %}
{% endblock static_href %}

{% block title %} Карты {% endblock title%}

{% block cards_active %}  active-page  {% endblock cards_active %}

{% block main %}
    <div class="main">
            <div class="main__container">

                <div class="main__title">
                    <h1>Топливные карты</h1>
                    <p>{{ all_cards.count }}</p>
                </div>
                <button class="main__btn-add-card" type="submit">Добавить карту</button>
            <form action="{% url 'cards' %}" method="get">
                <ul class="main__filtration filtr-items">
                    <li class="filtr-items__item ">
                        <input type="text" name="number"  placeholder="номер">
                    </li>
                    <li class="filtr-items__item">
                        ИЛИ
                    </li>
                    <li class="filtr-items__item">
                        <p>лимит:</p>
                        <input type="text" name="limit_min" placeholder="мин.">

                        <input type="text" name="limit_max" placeholder="макс.">
                    </li>

                    <li class="filtr-items__item">
                        <p>остаток:</p>
                        <input type="text" name="balance_min" placeholder="мин.">

                        <input type="text" name="balance_max" placeholder="макс.">
                    </li>

                    <button type="submit" class="filtr-items__button">
                        <img src="{% static 'img/filtr/lupa.svg' %}" alt="поиск">
                    </button>
                </ul>
                <a class="btn-reset" href="{% url 'cards' %}">Сбросить</a>
            </form>

                <div class="main__information">
                    <table class="main__table table">

    <!-- ID -->                            <col style="width:5%">
    <!-- Дата создания -->                 <col style="width:15%">
    <!-- Дата окнчания -->                 <col style="width:15%">
    <!-- Срочность -->                     <col style="width:15%">
    <!-- Статус -->                        <col style="width:15%">
    <!-- Тип -->                           <col style="width:2%">

                        <tr class="table__titles">
                          <th class="table__title">ID</th>
                          <th class="table__title">Номер</th>
                          <th class="table__title">Лимит</th>
                          <th class="table__title">Остаток</th>
                          <th class="table__title">Владелец</th>
                          <th class="table__title">Избъять</th>
                        </tr>
                    {% for card in all_cards %}
                        <tr class="table__row">
                          <td class="table__cell">{{ card.pk }}</td>
                          <td class="table__cell">{{ card.number|slice:"0:4"}} - {{ card.number|slice:"4:8"}} - {{ card.number|slice:"8:12"}} - {{ card.number|slice:"12:16"}}</td>
                          <td class="table__cell">{{ card.limit }} л.</td>
                          <td class="table__cell">{{ card.balance }} л.</td>
                          <td class="table__cell">{{ card.owner.user.last_name}} {{ card.owner.user.first_name|first}}.{{ card.owner.user.patronymic|first}}.</td>
{#                            {{ card.owner.user.first_name|first}}.{{ card.owner.user.patronymic|first}}.#}
                          <td class="table__cell">
                            <label class="table__check-label">
                              <input type="checkbox" class="table__check" name="table__check" id="1">
                            </label>
                          </td>
                        </tr>
                    {% endfor %}
                    </table>
                </div>
            </div>
        </div>
{% endblock main %}

{% block forms %}
     <form method="post" action="{% url 'cards' %}">
     {% csrf_token %}
        <div class="form-card add">
          <button type="reset">
            <div class="bnt-form-card-reset-add">
              <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                <line x1="0" x2="100" y1="0" y2="100" />
                <line x1="0" x2="100" y1="100" y2="0" />
              </svg>
            </div>
          </button>
          <h1 class="form-card__title">
            Добавление карты:
          </h1>
            <div class="form-card__timing">
{#              <label for="card_number">Номер:</label>#}
{#              <input type="text" id="card_number">#}
{##}
{#              <label for="card_limit">Лимит:</label>#}
{#              <input type="number" id="card_limit">#}
                {{ form }}

              <button type="submit">Отправить</button>
            </div>
        </div>
      </form>
{% endblock forms %}

{% block js_script %}
<script src="{% static 'js/cards.js' %}"></script>
{% endblock js_script %}