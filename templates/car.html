{% extends 'base.html' %}
{% load static %}

{% block static_href %}
    {% static 'css/car.css' %}
{% endblock static_href %}

{% block title %} {{ car.registration_number }} {% endblock title%}


{% block main %}
      <div class="main">
        <div class="main__container">
          <div class="main__car car-area">
            <div class="car-area__avatar">
                <img src="../img/cars/tesla.jpg" alt="" />
                <input type="file" name="avatar" id="image" />
            </div>
            <div class="car-area__info">
              <div class="car-area__item">
                <p>Марка:</p>
                <span>Shkoda</span>
              </div>

              <div class="car-area__item">
                <p>Номер:</p>
                <span>A-111-EE</span>
              </div>

              <div class="car-area__item">
                <p>Код:</p>
                <span>86</span>
              </div>

              <div class="car-area__item">
                <p>Последний осмотр:</p>
                <span>12.12.21</span>
              </div>

              <div class="car-area__item">
                <p>Водитель:</p>
                <span>Золотавин И. А</span>
              </div>
            </div>
          </div>

          <div class="main__tables">
            <div class="main__table table">
                <h1 class="table__table-title">Заявки</h1>
                <button class="table__btn-add-app">Добавить</button>
                <table>
                    <!--  -->
    <!-- ID -->                            <col style="width:1%">
    <!-- Дата создания -->                 <col style="width:10%">
    <!-- Дата окнчания -->                 <col style="width:10%">
    <!-- Срочность -->                     <col style="width:10%">
    <!-- Статус -->                        <col style="width:10%">
    <!-- Тип -->                           <col style="width:20%">
    <!-- Создатель -->                     <col style="width:10%">



                    <tr class="table__titles">
                      <th class="table__title">ID</th>
                      <th class="table__title">Дата</th>
                      <th class="table__title">Срочность</th>
                      <th class="table__title">Статус</th>
                      <th class="table__title">Тип</th>
                      <th class="table__title">Краткое<br> описание</th>
                      <th class="table__title">Действия</th>
                    </tr>
                    {% for app in car.applications.all %}
                    <tr class="table__row">
                        <td class="table__cell">{{ app.id }}</td>
                        <td class="table__cell">
                            {{ app.start_date}}
                            <br>-<br>
                            {{ app.end_date}}
                        </td>
                        <td class="table__cell">{{ app.urgency }}</td>
                        <td class="table__cell">{{ app.status }}</td>
                        <td class="table__cell">{{ app.type_of }}</td>
                        <td class="table__cell">{{ app.description|truncatechars:10 }}</td>
                        <td class="table__cell">
                          <button class="table__btn-change-app">изменить заявку</button>
                        </td>
                      </tr>
                    {% endfor %}
                </table>
            </div>

            <div class="main__table table">
                <h1 class="table__table-title">Документы</h1>
                <button class="table__btn-add-doc">Добавить</button>
                <table>

                    <!-- ID -->                            <col style="width:5%">
                    <!-- Дата создания -->                 <col style="width:15%">
                    <!-- Дата окнчания -->                 <col style="width:15%">

                                        <tr class="table__titles">
                                          <th class="table__title">Тип документа</th>
                                          <th class="table__title">Дата получения</th>
                                          <th class="table__title">Дата окончания</th>
                                        </tr>
                                        <label for="1">
                                        <tr class="table__row">
                                          <td class="table__cell">паспорт</td>
                                          <td class="table__cell">22.02.2019</td>
                                          <td class="table__cell">22.02.2024</td>
                                        </tr>

                                        <tr class="table__row">
                                            <td class="table__cell">страховое</td>
                                            <td class="table__cell">22.02.2021</td>
                                            <td class="table__cell">22.02.2022</td>
                                          </tr>
                </table>
            </div>
          </div>
        </div>
      </div>
{% endblock main %}

{% block forms %}
    <form method="post" action="{% url 'choose-car' car.registration_number %}">
    {% csrf_token %}
      <div class="form-app add">
        <button type="reset">
          <div class="bnt-form-app-reset-add">
            <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
              <line x1="0" x2="100" y1="0" y2="100" />
              <line x1="0" x2="100" y1="100" y2="0" />
            </svg>
          </div>
        </button>
        <h1 class="form-app__title">
          Заявка на авто {{ car.registration_number }}
        </h1>
          <div class="form-app__timing">
              {{ form.errors }}
              {{ form.type_of.label }}
              {{ form.type_of }}

              {{ form.urgency.label }}
              {{ form.urgency }}

              {{ form.description.label }}
              {{ form.description }}

              <input type="hidden" name="car" id="id_car" value="{{ car.pk }}">
              <input type="hidden" name="owner" id="id_owner" value="{{ user.pk }}">
              <input type="hidden" name="status" value="O" id="id_status">
    {#            <input type="radio" name="timing" id="rdo-noturgent">#}
{#            <label for="rdo-noturgent">Не срочно</label>#}
{##}
{##}
{#            <input type="radio" name="timing" id="rdo-urgent">#}
{#            <label for="rdo-urgent">Срочно</label>#}
{##}
{#            <input type="radio" name="timing" id="rdo-veryurgent">#}
{#            <label for="rdo-veryurgent">Очень срочно</label>#}
{##}
{#            <label for="new_descr">Опишите суть заявки:</label>#}
{#            <textarea name="description" id="new_descr" cols="30" rows="10"></textarea>#}
            <button type="submit">Отправить</button>
          </div>
     </div>
    </form>


    <form method="post">
      <div class="form-app change">
        <button type="reset">
          <div class="bnt-form-app-reset-change">
            <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
              <line x1="0" x2="100" y1="0" y2="100" />
              <line x1="0" x2="100" y1="100" y2="0" />
            </svg>
          </div>
        </button>
        <h1 class="form-app__title">
          Заявка №21
        </h1>
        <p>Срочность:</p>
          <div class="form-app__timing">

            <input type="radio" checked name="timing-change" id="rdo-noturgent-c">
            <label for="rdo-noturgent-c">Не срочно</label>


            <input type="radio" name="timing-change" id="rdo-urgent-c">
            <label for="rdo-urgent-c">Срочно</label>

            <input type="radio" name="timing-change" id="rdo-veryurgent-c">
            <label for="rdo-veryurgent-c">Очень срочно</label>

            <label for="descr-change">Опишите суть заявки:</label>
            <textarea name="description" id="descr-change" cols="30" rows="10"></textarea>
            <button type="submit">Отправить</button>
          </div>
      </div>
    </form>

    <form method="post">
      <div class="form-doc add">
        <button type="reset">
          <div class="bnt-form-doc-reset-add">
            <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
              <line x1="0" x2="100" y1="0" y2="100" />
              <line x1="0" x2="100" y1="100" y2="0" />
            </svg>
          </div>
        </button>
        <h1 class="form-app__title">
          Добавление документов:
        </h1>
        <p>Тип:</p>
          <div class="form-app__timing">

            <input type="radio" checked name="type_doc" id="rdo-passport">
            <label for="rdo-passport">Паспорт</label>


            <input type="radio" name="type_doc" id="rdo-snils">
            <label for="rdo-snils">Снился</label>

            <input type="radio" name="type_doc" id="rdo-insurance">
            <label for="rdo-insurance">Строховой полис</label>

            <label for="date-start">Дата получения:</label>
            <input type="date" id="date-start">

            <label for="date-end">Дата получения:</label>
            <input type="date" id="date-end">

            <label for="doc-copy">Прикрепите документа</label>
            <input type="file">

            <button type="submit">Отправить</button>
          </div>
      </div>
    </form>
{% endblock forms %}

{% block js_script %}
<script src="{% static 'js/car.js' %}"></script>
{% endblock js_script %}